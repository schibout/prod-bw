<?xml version="1.0" encoding="UTF-8"?>
<Workflow xmlns="http://soap.sforce.com/2006/04/metadata">
    <fieldUpdates>
        <fullName>MAJMontantOpp</fullName>
        <field>Amount</field>
        <formula>SyncedQuote.DEV_Montant__c</formula>
        <name>MAJMontantOpp</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>MAJOppNom</fullName>
        <field>Name</field>
        <formula>UPPER( Name)</formula>
        <name>MAJOppNom</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>MAJ_NomDeLOpportunite</fullName>
        <field>Name</field>
        <formula>UPPER(&quot;OP-&quot;&amp;LEFT(Account.Name, 6)&amp;&quot;-&quot;&amp;TrigrammeSSDomaine__c&amp;&quot;-&quot;&amp;OpportunityNumber__c)</formula>
        <name>MAJ_Nom de l&apos;opportunité</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Mis_A_Jour_Type_TVA</fullName>
        <field>Type</field>
        <literalValue>71</literalValue>
        <name>Mis A Jour Type TVA</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>UpdateCommentaire</fullName>
        <field>OPP_Commentaires__c</field>
        <formula>$Label.CommentaireSansSuite</formula>
        <name>UpdateCommentaire</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>UpdateEtape</fullName>
        <field>StageName</field>
        <literalValue>Sans Suite</literalValue>
        <name>UpdateEtape</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>UpdateMotif</fullName>
        <field>OPP_MotifSansSuite__c</field>
        <literalValue>Date de clôture dépassée</literalValue>
        <name>UpdateMotif</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>dfsdsdfs</fullName>
        <field>CloseDate</field>
        <name>dfsd</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <rules>
        <fullName>WF01_OPP_MiseAJourNom</fullName>
        <actions>
            <name>MAJ_NomDeLOpportunite</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <description>Ce workflow permet de mettre automatiquement le nom de l&apos;opportunité avec une suite de nom et de date.</description>
        <formula>OR(ISNEW(), ISCHANGED(Name))</formula>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>WF07_OPP_NomMajuscule</fullName>
        <actions>
            <name>MAJOppNom</name>
            <type>FieldUpdate</type>
        </actions>
        <active>false</active>
        <criteriaItems>
            <field>Opportunity.Name</field>
            <operation>notEqual</operation>
        </criteriaItems>
        <criteriaItems>
            <field>User.USER_ByPassRegleWorkflow__c</field>
            <operation>equals</operation>
            <value>False</value>
        </criteriaItems>
        <triggerType>onCreateOrTriggeringUpdate</triggerType>
    </rules>
    <rules>
        <fullName>WF25_OPP_MAJMontant</fullName>
        <actions>
            <name>MAJMontantOpp</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <formula>SyncedQuote.Id != Null</formula>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>WF28_OPP_EtapeSansSuite</fullName>
        <active>true</active>
        <criteriaItems>
            <field>Opportunity.StageName</field>
            <operation>equals</operation>
            <value>Qualification,Devis</value>
        </criteriaItems>
        <criteriaItems>
            <field>Quote.DEV_TypeDeDevis__c</field>
            <operation>notEqual</operation>
            <value>3</value>
        </criteriaItems>
        <triggerType>onCreateOrTriggeringUpdate</triggerType>
        <workflowTimeTriggers>
            <actions>
                <name>UpdateCommentaire</name>
                <type>FieldUpdate</type>
            </actions>
            <actions>
                <name>UpdateEtape</name>
                <type>FieldUpdate</type>
            </actions>
            <actions>
                <name>UpdateMotif</name>
                <type>FieldUpdate</type>
            </actions>
            <offsetFromField>Opportunity.CloseDate</offsetFromField>
            <timeLength>1</timeLength>
            <workflowTimeTriggerUnit>Days</workflowTimeTriggerUnit>
        </workflowTimeTriggers>
    </rules>
    <rules>
        <fullName>WF28_OPP_TypeTVA</fullName>
        <actions>
            <name>Mis_A_Jour_Type_TVA</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <criteriaItems>
            <field>Account.ACC_Entite_BW__c</field>
            <operation>equals</operation>
            <value>3</value>
        </criteriaItems>
        <criteriaItems>
            <field>User.USER_ByPassRegleWorkflow__c</field>
            <operation>equals</operation>
            <value>False</value>
        </criteriaItems>
        <triggerType>onCreateOnly</triggerType>
    </rules>
</Workflow>
